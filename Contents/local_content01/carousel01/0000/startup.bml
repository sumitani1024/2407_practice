<?xml version="1.0" encoding="EUC-JP" ?>
<!DOCTYPE bml PUBLIC "+//ARIB STD-B24:1999//DTD BML Document//JA" "http://www.arib.or.jp/B24/DTD/bml_1_1.dtd">
<?bml bml-version="3.0" ?>
<bml>
	<head>
		<title>12seg startup.bml[TEMPLATE]</title>

		<link href="startup.css" />
		<script src = "functions.ecm"/>
		<script>
			<![CDATA[
			function init(){
				disp("pDebug");
				debugFlg = true;

				updateModule();
				showInit();
				return;
			}

			//¶¦ÄÌ
			var gStatusView = new Object();
			gStatusView.STATE_TOP = true;
			gStatusView.STATE_JOINHOW = false;
			gStatusView.STATE_PROFILE = false;
			gStatusView.STATE_REGI = false;
			gStatusView.STATE_URGE = false;

			var gStatusNum = 19;

			function updateModule(){
				var ele = g("mu00");
				ele.moduleRef = ES + MODULE;
				ele.subscribe = true;
			}

			function showInit(){
				readBtbData();
				showTop(true);
			}

			// ¥Õ¥Ã¥¿¡¼¥Ü¥¿¥ó²¡²¼
			function kd()
			{
				var buttonKey = getKey();

				debugN( "ÈÖÁÈ¥Ü¥¿¥ó²¡²¼: " + buttonKey);
				if(buttonKey == 21 || buttonKey == 22 || buttonKey == 23 || buttonKey == 24)
				{
					footerButtonChange(buttonKey);
				}else if(buttonKey == 19){
					//todo: else if¤ÇNHK¥È¥Ã¥×¤ØÌá¤ë½èÍýÄÉ²Ã
					if(gStatusNum != 19){
						footerButtonChange(buttonKey);
					}else{
						debugN( "NHK¥È¥Ã¥×¤ØÌá¤ë");
						playSound(7);
						//gotoNHKTop();
					}
				}
			}

			function footerButtonChange(key)
			{
				if(gStatusNum == key){
					debugN( "Æ±¥Ü¥¿¥ó²¡²¼");
					return;
				}

				footerButtonReturn();
				playSound(7);
				if(key == 21){
					undisp("button_blue_off");
					disp("button_blue_on");

					gStatusView.STATE_JOINHOW = true;
					showJoinhow(gStatusView.STATE_JOINHOW);
				}else if(key == 22){
					undisp("button_red_off");
					disp("button_red_on");

					gStatusView.STATE_PROFILE = true;
					showProf(gStatusView.STATE_PROFILE);
				}else if(key == 23){
					undisp("button_green_off");
					disp("button_green_on");

					gStatusView.STATE_REGI = true;
					showRegi(gStatusView.STATE_REGI);
				}else if(key == 24){
					undisp("button_yellow_off");
					disp("button_yellow_on");

					gStatusView.STATE_URGE = true;
					showNet(gStatusView.STATE_URGE);
				}else if(key == 19){
					gStatusView.STATE_TOP = true;
					showTop(gStatusView.STATE_TOP);
				}

				gStatusNum = key;
			}

			function footerButtonReturn()
			{
				if(gStatusView.STATE_JOINHOW){
					undisp("button_blue_on");
					disp("button_blue_off");

					gStatusView.STATE_JOINHOW = false;
					showJoinhow(gStatusView.STATE_JOINHOW);
				}else if(gStatusView.STATE_PROFILE){
					undisp("button_red_on");
					disp("button_red_off");

					gStatusView.STATE_PROFILE = false;
					showProf(gStatusView.STATE_PROFILE);
				}else if(gStatusView.STATE_REGI){
					undisp("button_green_on");
					disp("button_green_off");

					gStatusView.STATE_REGI = false;
					showRegi(gStatusView.STATE_REGI);
				}else if(gStatusView.STATE_URGE){
					undisp("button_yellow_on");
					disp("button_yellow_off");

					gStatusView.STATE_URGE = false;
					showNet(gStatusView.STATE_URGE);
				}else if(gStatusView.STATE_TOP){
					undisp("button_back_housou");
					disp("button_back_top");

					gStatusView.STATE_TOP = false;
					showTop(gStatusView.STATE_TOP);
				}
			}

			function showTop(flag){
				if(flag){
					disp("button_back_top");
					undisp("button_back_housou");

					disp("top_base");
					disp("top_title_text");
					disp("top_desc_text");
				}else{
					undisp("button_back_top");
					disp("button_back_housou");

					undisp("top_base");
					undisp("top_title_text");
					undisp("top_desc_text");
				}
			}

			function showJoinhow(flag){
				if(flag){
					disp("how_join_base");
					disp("how_join_desc_text");
					disp("how_join_page_right");
					disp("how_join_page_left");
					disp("how_join_page_focus");
					disp("how_join_page_text");
				}else{
					undisp("how_join_base");
					undisp("how_join_desc_text");
					undisp("how_join_page_right");
					undisp("how_join_page_left");
					undisp("how_join_page_focus");
					undisp("how_join_page_text");
				}
			}

			function showProf(flag){
				if(flag){
					disp("prof_base");
					disp("prof_desc_text");
					disp("prof_page_right");
					disp("prof_page_left");
					disp("prof_page_focus");
					disp("prof_page_text");
				}else{
					undisp("prof_base");
					undisp("prof_desc_text");
					undisp("prof_page_right");
					undisp("prof_page_left");
					undisp("prof_page_focus");
					undisp("prof_page_text");
				}
			}

			function showRegi(flag){
				if(flag){
					disp("regi_base");
					disp("regi_name_text");
					disp("regi_enagy_text");
					disp("regi_level_text");
					disp("regi_age_text");
					disp("regi_address_text");
					disp("regi_button_reset");
					disp("regi_button_change");
					disp("regi_button_complete");
					disp("regi_button_balloon");
				}else{
					undisp("regi_base");
					undisp("regi_name_text");
					undisp("regi_enagy_text");
					undisp("regi_level_text");
					undisp("regi_age_text");
					undisp("regi_address_text");
					undisp("regi_button_reset");
					undisp("regi_button_change");
					undisp("regi_button_complete");
					undisp("regi_button_balloon");
				}
			}

			function showNet(flag){
				if(flag){
					disp("net_base");
					disp("net_desc_text");
					disp("net_page_right");
					disp("net_page_left");
					disp("net_page_focus");
					disp("net_page_text");
				}else{
					undisp("net_base");
					undisp("net_desc_text");
					undisp("net_page_right");
					undisp("net_page_left");
					undisp("net_page_focus");
					undisp("net_page_text");
				}
			}

			//btbÆÉ¤ß¹þ¤ß
			function readBtbData(){
				readbtbtop();
				readbtbJoinhow();
				readbtbProf();
				readbtbNet();
			}

			var topBtbData = new Array();
			function readbtbtop(){
					var topbtbPath = (ES + "0001/top.btb").toString();
					var btb = readBtb(topbtbPath, "2,U:1B,U:1B,S:2V");
					for(var i = 0; i < btb.length; i++ ){
						topBtbData[btb[i][1]] = btb[i][2];
					}
					setData("top_title_text", topBtbData[0]);
					setData("top_desc_text", topBtbData[1]);	
			}

			var joinhowBtbData = "";
			function readbtbJoinhow(){
				var joinhowbtbPath = (ES + "0001/joinhow.btb").toString();
				var btb = readBtb(joinhowbtbPath, "2,U:1B,S:2V");
				for(var i = 0; i < btb.length; i++ ){
					joinhowBtbData += btb[i][1];
				}
			setData("how_join_desc_text", joinhowBtbData);
			}

			var profBtbData = "";
			function readbtbProf(){
				var profbtbPath = (ES + "0001/prof.btb").toString();
				var btb = readBtb(profbtbPath, "1,U:1B,S:1V");
				for(var i = 0; i < btb.length; i++ ){
					profBtbData += btb[i][1];

					if(i+1 != btb.length){
						profBtbData += "\r\n";
					}
				}
				setData("prof_desc_text", profBtbData);
			}

			var netBtbData = "";
			function readbtbNet(){
				var netbtbPath = (ES + "0001/net.btb").toString();
				var btb = readBtb(netbtbPath, "2,U:1B,S:2V");
				for(var i = 0; i < btb.length; i++ ){
					netBtbData += btb[i][1];
				}
				setData("net_desc_text", netBtbData);
			}

			]]>
		</script>

		<bevent>
			<beitem id="mu00" type="ModuleUpdated" onoccur="srcUpdated();" />
			<beitem id="ml01" type="ModuleLocked"  onoccur="ML01();" />
			<beitem id="EvtChange" type="DataEventChanged"  onoccur="dataEvtChanged();" subscribe="subscribe"/>
			<beitem id="Dpress"    type="DataButtonPressed" onoccur="Dpressed();"       subscribe="subscribe"/>
			<beitem id="EventMsg_176"  type="EventMessageFired" onoccur="EventMsgProc_176();" message_id="176" subscribe="subscribe" />
			<beitem id="EventMsg_146"  type="EventMessageFired" onoccur="EventMsgProc_146();" message_id="146" es_ref="arib-dc://-1.-1.-1/60" message_group_id="1" />
		</bevent>

	</head>
	<body id="Body" onload="init();">
		<div id="AVarea" style="left:0px;top:0px;width:960px;height:540px;">
			<object id="bg" type="image/jpeg" data="BG.jpg" style="left:0px;top:0px;width:960px;height:540px;"/>
			<object id="Vstream" style="left:52px;top:30px;width:480px;height:270px;" type="video/X-arib-mpeg2" data="/-1" remain="remain"/>
			<object id="Astream" type="audio/X-arib-mpeg2-aac" data="/-1" streamstatus="play" remain="remain"/>
		</div>

		<div id="foc0" onkeydown="kd();" style="nav-index:0;" />

		<!-- xxxx -->
		<div id="d" style="left:45px;top:495px;width:87px;height:21px;visibility:visible;">
			<!--
			<object id="o" type="image/X-arib-png" data="com-top-n.png" style="left:0px;top:0px;width:87px;height:21px;"/>
			-->
		</div>

		<!-- top²èÌÌ¥Ù¡¼¥¹ -->
		<div id="top_scene">
			<object id="top_base" type="image/X-arib-png" data="base-top.png"/>
			<p id="top_title_text">
				<![CDATA[¥¿¥¤¥È¥ë_TEST¡»¡»¡»¡»¡»¡ü¡»¡»¡»¡»¡ü¡»¡»¡»¡»]]>
			</p>
			<p id="top_desc_text">
				<![CDATA[ÀâÌÀÊ¸_TEST¡»¡»¡»¡»¡»¡ü¡»¡»¡»¡»¡ü¡»¡»¡»¡»]]>
			</p>
		</div>

		<!-- ÈÖÁÈ»²²ÃÊýË¡ -->
		<div id="how_join_scene">
			<object id="how_join_base" type="image/X-arib-png" data="base-b.png"/>
			<p id="how_join_desc_text">
				<![CDATA[ÀâÌÀÊ¸_TEST¡»¡»¡»¡»¡»¡ü¡»¡»¡»¡»¡ü¡»¡»¡»¡»]]>
			</p>
			<div id="how_join_page">
				<object id="how_join_page_right" type="image/X-arib-png" data="base-b-page-right.png"/>
				<object id="how_join_page_left" type="image/X-arib-png" data="base-b-page-left.png"/>
				<object id="how_join_page_focus" type="image/X-arib-png" data="page-next-focus.png"/>
				<p id="how_join_page_text">
					<![CDATA[1/2]]>
				</p>
			</div>
		</div>

		<!-- ¤Æ¤ì¤ÓÀï»Î¾Ò²ð -->
		<div id="prof_scene">
			<object id="prof_base" type="image/X-arib-png" data="base-r.png"/>
			<p id="prof_desc_text">
				<![CDATA[ÀâÌÀÊ¸_TEST¡»¡»¡»¡»¡»¡ü¡»¡»¡»¡»¡ü¡»¡»¡»¡»]]>
			</p>
			<div id="prof_page">
				<object id="prof_page_right" type="image/X-arib-png" data="base-r-page-right.png"/>
				<object id="prof_page_left" type="image/X-arib-png" data="base-r-page-left.png"/>
				<object id="prof_page_focus" type="image/X-arib-png" data="page-next-focus.png"/>
				<p id="prof_page_text">
					<![CDATA[1/2]]>
				</p>
			</div>
		</div>

		<!-- Ãã¤Î´ÖÀï»Î¾ðÊó -->
		<div id="regi_scene">
			<object id="regi_base" type="image/X-arib-png" data="base-g.png"/>
			<p id="regi_name_text">
				<![CDATA[Ì¾Á°¡»¡»¡»¡»¡»]]>
			</p>
			<p id="regi_enagy_text">
				<![CDATA[123]]>
			</p>
			<p id="regi_level_text">
				<![CDATA[123]]>
			</p>
			<p id="regi_age_text">
				<![CDATA[123]]>
			</p>
			<p id="regi_address_text">
				<![CDATA[ÅìµþÅÔ]]>
			</p>
			<!-- <object id="regi_list_focus_top" type="image/X-arib-png" data="base-g-list-focus-top.png"/> -->
			<!-- <object id="regi_list_decision_focus_top" type="image/X-arib-png" data="base-g-list-decision-top.png"/> -->
			<!-- <object id="regi_list_focus" type="image/X-arib-png" data="base-g-list-focus.png"/> -->
			<!-- <object id="regi_list_decision_focus" type="image/X-arib-png" data="base-g-list-decision.png"/> -->
			<div id="regi_button">
				<object id="regi_button_reset" type="image/X-arib-png" data="base-g-button-reset.png"/>
				<object id="regi_button_change" type="image/X-arib-png" data="base-g-button-fix.png"/>
				<object id="regi_button_complete" type="image/X-arib-png" data="base-g-button-regi.png"/>
				<object id="regi_button_balloon" type="image/X-arib-png" data="base-g-ballon.png"/>
				<object id="regi_button_left_focus" type="image/X-arib-png" data="base-g-button-left-focus.png"/>
				<object id="regi_button_left_decision" type="image/X-arib-png" data="base-g-button-left-decision.png"/>
				<object id="regi_button_right_focus" type="image/X-arib-png" data="base-g-button-right-focus.png"/>
				<object id="regi_button_right_decision" type="image/X-arib-png" data="base-g-button-right-decision.png"/>
			</div>
		</div>


		<!-- ¥Í¥Ã¥È¤Ë¤Ä¤Ê¤´¤¦ -->
		<div id="net_scene">
			<object id="net_base" type="image/X-arib-png" data="base-y.png"/>
			<p id="net_desc_text">
				<![CDATA[ÀâÌÀÊ¸_TEST¡»¡»¡»¡»¡»¡ü¡»¡»¡»¡»¡ü¡»¡»¡»¡»]]>
			</p>
			<div id="net_page">
				<object id="net_page_right" type="image/X-arib-png" data="base-y-page-right.png"/>
				<object id="net_page_left" type="image/X-arib-png" data="base-y-page-left.png"/>
				<object id="net_page_focus" type="image/X-arib-png" data="page-next-focus.png"/>
				<p id="net_page_text">
					<![CDATA[1/2]]>
				</p>
			</div>
		</div>

		<!-- ³Æ¥·¡¼¥ó¶¦ÄÌÉôÊ¬ -->
		<div id="menu_common_area">
			<object id="logo" type="image/X-arib-png" data="logo.png"/>
			<object id= "date" type="image/X-arib-png" data="housou-date.png"/>
			<object id= "zionoko" type="image/X-arib-png" data="zionoko-1.png"/>
		</div>
		
		<!-- ¥Õ¥Ã¥¿¡¼¥Ü¥¿¥ó -->
		<div id="footer_button_blue">
			<object id= "button_blue_on" class ="button_blue" type="image/X-arib-png" data="futter-b-button-on.png"/>
			<object id= "button_blue_off" class ="button_blue" type="image/X-arib-png" data="futter-b-button-off.png"/>
		</div>
		<div id="footer_button_red">
			<object id= "button_red_on" class ="button_red" type="image/X-arib-png" data="futter-r-button-on.png"/>
			<object id= "button_red_off" class ="button_red" type="image/X-arib-png" data="futter-r-button-off.png"/>
		</div>
		<div id="footer_button_green">
			<object id= "button_green_on" class ="button_green" type="image/X-arib-png" data="futter-g-button-on.png"/>
			<object id= "button_green_off" class ="button_green" type="image/X-arib-png" data="futter-g-button-off.png"/>
		</div>
		<div id="footer_button_yellow">
			<object id= "button_yellow_on" class ="button_yellow" type="image/X-arib-png" data="futter-y-button-on.png"/>
			<object id= "button_yellow_off" class ="button_yellow" type="image/X-arib-png" data="futter-y-button-off.png"/>
		</div>
		<div id="footer_button_top">
			<object id= "button_back_housou" class ="button_top" type="image/X-arib-png" data="back-housou-top.png"/>
			<object id= "button_back_top" class ="button_top" type="image/X-arib-png" data="back-top.png"/>
		</div>

		<!-- ¥Ç¥Ð¥Ã¥°ÍÑ -->
		<div id="d_debug" style="left:52px;top:30px;width:900px;height:400px;" >
			<p id="pDebug" ><![CDATA[]]></p>
		</div>
	</body>
</bml>
